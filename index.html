<!DOCTYPE html>
<html lang="fr">
   <head>
      <meta charset="UTF-8" />
      <meta
         name="google-site-verification"
         content="lCxNTm-SpFTflRCtK_ELgFuWUcVPUNHU2ekq3KFVRlM"
      />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link
         href="https://yt3.googleusercontent.com/U1irix8yAHM3hWAVSqzfcqA5tvfs5bBlDppJL27ZJuVnLRU0WnQlfiOjj92NGqmuATjxzkQn=s1920-c-k-c0x00ffffff-no-rj"
         rel="icon"
         type="image/x-icon"
      />
      <title>Classification des armes selon le CSI</title>
      <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
         rel="stylesheet"
      />
      <style>
         body {
            transition: background-color 0.1s ease, color 0.1s ease;
         }
         [data-bs-theme="light"] body {
            background-color: #f8f9fa; /* clair */
            color: #212529;
         }
         [data-bs-theme="dark"] body {
            background-color: #121212; /* sombre */
            color: #e9ecef;
         }
         .container {
            max-width: 70rem;
            margin-top: 5rem;
         }
         .card {
            border-radius: 2rem;
            box-shadow: 0 1rem 5rem rgba(0, 0, 0, 0.1);
         }
         textarea {
            font-family: monospace;
            font-size: 0.9rem;
            height: 17rem;
         }
      </style>
   </head>
   <body>
      <div class="container">
         <div class="card p-4 position-relative">
            <!-- Bouton de mode sombre -->
            <button
               id="themeToggle"
               class="btn btn-outline-secondary btn-sm position-absolute"
               style="top: 1rem; right: 1rem"
               title="Basculer clair/sombre"
            >
               üåô
            </button>
            <h2 class="mb-4 text-center">
               Classification des armes selon le
               <a href="https://www.legifrance.gouv.fr/codes/article_lc/LEGIARTI000037908239/" target="_blank" hreflang="fr" class="text-body text-decoration-underline fst-italic">Code de la S√©curit√© Int√©rieure</a>
            </h2>

            <form id="formArme">
               <div class="row mb-3">
                  <div class="col-md-6">
                     <label class="form-label">Type d'arme :</label>
                     <select id="type" class="form-select">
                        <option selected>√âpaule</option>
                        <option>Poing</option>
                     </select>
                  </div>
                  <div class="col-md-6">
                     <label class="form-label">Syst√®me :</label>
                     <select id="systeme" class="form-select">
                        <option>Automatique</option>
                        <option>Semi-automatique</option>
                        <option>Levier de sous-garde</option>
                        <option>Pompe</option>
                        <option selected>Verrou</option>
                        <option>Lin√©aire</option>
                        <option>D√©verrouillage de culasse par bouton</option>
                        <option>Monocoup</option>
                     </select>
                  </div>
               </div>

               <div class="row mb-3">
                  <div class="col-md-6">
                     <label class="form-label">Type de canon :</label>
                     <select id="canon" class="form-select">
                        <option selected>Ray√©</option>
                        <option>Lisse</option>
                     </select>
                  </div>
                  <div class="col-md-6">
                     <label class="form-label">Calibre :</label>
                     <select id="calibre" class="form-select"></select>
                  </div>
               </div>

               <div class="row mb-3">
                  <div class="col-md-6" id="alimentationSection">
                     <label class="form-label">Type d‚Äôalimentation :</label>
                     <select id="alimentation" class="form-select">
                        <option>Magasin</option>
                        <option selected>Chargeur amovible</option>
                        <option>Chargeur inamovible</option>
                     </select>
                  </div>
                  <div class="col-md-6" id="capaciteSection">
                     <label class="form-label"
                        >Capacit√© totale (chambre + chargeur) :</label
                     >
                     <input
                        type="number"
                        id="capacite"
                        class="form-control"
                        value="11"
                        min="1"
                     />
                  </div>
               </div>

               <div class="row mb-3">
                  <div class="col-md-6">
                     <label class="form-label">Longueur du canon (cm) :</label>
                     <input
                        type="number"
                        id="longueur_canon"
                        class="form-control"
                        value="46"
                     />
                  </div>
                  <div class="col-md-6">
                     <label class="form-label"
                        >Longueur minimale de l‚Äôarme (cm) :</label
                     >
                     <input
                        type="number"
                        id="longueur_min"
                        class="form-control"
                        value="81"
                     />
                  </div>
               </div>

               <div class="row mb-3">
                  <div class="col-md-6">
                     <div class="form-check">
                        <input
                           class="form-check-input"
                           type="checkbox"
                           id="brevet"
                        />
                        <label class="form-check-label" for="brevet"
                           >Brevet avant 1900</label
                        >
                     </div>
                     <div class="form-check">
                        <input
                           class="form-check-input"
                           type="checkbox"
                           id="crosse"
                        />
                        <label class="form-check-label" for="crosse"
                           >Crosse t√©lescopique ou rabattable</label
                        >
                     </div>
                  </div>
                  <div class="col-md-6">
                     <div class="form-check">
                        <input
                           class="form-check-input"
                           type="checkbox"
                           id="apparence"
                        />
                        <label class="form-check-label" for="apparence"
                           >Apparence d‚Äôarme automatique</label
                        >
                     </div>
                     <div class="form-check">
                        <input
                           class="form-check-input"
                           type="checkbox"
                           id="transformee"
                        />
                        <label class="form-check-label" for="transformee"
                           >Arme d'origine automatique</label
                        >
                     </div>
                  </div>
               </div>

               <div class="text-center">
                  <button
                     type="button"
                     id="classerBtn"
                     class="btn btn-primary btn-lg"
                     hidden
                  >
                     Classer l‚Äôarme
                  </button>
               </div>
            </form>
            <br />
            <div class="d-flex justify-content-between align-items-center mb-2">
               <h4 class="mb-0">R√©sultat :</h4>
               <button id="copyBtn" class="btn btn-outline-secondary btn-sm">
                  Copier
               </button>
            </div>
            <textarea id="resultat" class="form-control" readonly></textarea>
         </div>
      </div>

      <script>
        const CALIBRES = [
         // 1) Percussion annulaire (rimfire) - en t√™te
         "22lr",
         "17hmr",
         "17wsm",

         // 2) Canon lisse (smoothbore) - du moins puissant au plus puissant
         "410",
         "36 gauge",
         "32 gauge",
         "28 gauge",
         "24 gauge",
         "20 gauge",
         "16 gauge",
         "14 gauge",
         "12 gauge",
         "10 gauge",
         "8 gauge",

         // 3) Le reste tri√© par puissance approximative (croissant)
         "25 ACP",
         "32 ACP",
         "380acp",
         "9x19mm Parabellum",
         "9x21mm",
         "40S&W",
         "45 ACP",
         "45 Colt",
         "7.62x25mm Tokarev",
         "38 Special",
         "10mm auto",
         "357 Magnum",
         "44 Magnum",
         "454 Casull",
         "500 S&W",
         "5.7x28mm",
         "4.6x30mm",
         "300 AAC Blackout",
         "6mm PPC",
         ".22-250 Remington",
         "222 Remington",
         "5.45x39mm",
         "5.56x45mm OTAN / 223 Remington",
         "6.5 Grendel",
         "7.62x39mm",
         "6.5x55mm Swedish",
         "6.5 Creedmoor",
         "7.62x51mm OTAN / 308 Winchester",
         "7.62x54mmR",
         "8x57mm IS",
         "30-06 Springfield",
         "45-70 Govt",
         "7mm Remington Magnum",
         "7.5x55mm Swiss",
         "30-06 Springfield",
         "30-30 Winchester",
         "8mm Lebel",
         "9.3x62mm",
         "9.3x64mm",
         "300 Winchester Magnum",
         "300 Weatherby Magnum",
         "338 Winchester Magnum",
         "338 Lapua Magnum",
         "416 Rigby",
         "12.7x99mm OTAN / 50 BMG",
         "14.5x114mm"
         ];

         const CALIBRES_LISSES = [
            "8 gauge",
            "10 gauge",
            "12 gauge",
            "14 gauge",
            "16 gauge",
            "20 gauge",
            "24 gauge",
            "28 gauge",
            "32 gauge",
            "36 gauge",
            "410",
         ];

         const CALIBRES_B4 = [
            "7.62x39mm",
            "5.56x45mm OTAN / 223 Remington",
            "5.45x39mm",
            "12.7x99mm OTAN / 50 BMG",
            "14.5x114mm",
         ];
         const RIMFIRE_CALIBRES = ["22lr", "17hmr", "17wsm"];

         const selectCalibre = document.getElementById("calibre");
         CALIBRES.forEach((c) => {
            const opt = document.createElement("option");
            opt.value = c;
            opt.textContent = c;
            selectCalibre.appendChild(opt);
         });
         selectCalibre.value = "22lr";

         document
            .getElementById("systeme")
            .addEventListener("change", function () {
               const capSec = document.getElementById("capaciteSection");
               if (this.value === "Monocoup") capSec.style.display = "none";
               else capSec.style.display = "block";
               const aliSec = document.getElementById("alimentationSection");
               if (this.value === "Monocoup") aliSec.style.display = "none";
               else aliSec.style.display = "block";
            });

         function afficherResultat(cat, raison, CSI) {
            const res = document.getElementById("resultat");
            res.value = `Cat√©gorie : ${cat}\n\nRaison :\n- ${raison}\n\nCSI applicable :\n${CSI}`;
         }

         document.getElementById("classerBtn").addEventListener("click", () => {
            const data = {
               type: document.getElementById("type").value,
               systeme: document.getElementById("systeme").value,
               canon: document.getElementById("canon").value,
               calibre: document.getElementById("calibre").value,
               alimentation: document.getElementById("alimentation").value,
               capacite: parseInt(
                  document.getElementById("capacite").value || "1"
               ),
               longueur_canon: parseFloat(
                  document.getElementById("longueur_canon").value || "0"
               ),
               longueur_min: parseFloat(
                  document.getElementById("longueur_min").value || "0"
               ),
               brevet_avant_1900: document.getElementById("brevet").checked,
               crosse_pliable: document.getElementById("crosse").checked,
               apparence_auto: document.getElementById("apparence").checked,
               transformee_auto: document.getElementById("transformee").checked,
            };

            const percussion_eff = RIMFIRE_CALIBRES.includes(data.calibre)
               ? "Annulaire"
               : "Centrale";

            // D√©but logique compl√®te de classification
            const CSI = {
               "A2-1":
                  "CSI R311-2 : A2-1 : Armes √† feu √† r√©p√©tition automatique, leurs √©l√©ments sp√©cifiquement con√ßus pour elles et tout dispositif additionnel pouvant se monter sur une arme √† feu √† r√©p√©tition semi-automatique permettant le tir en rafale de projectiles ou s'assimilant au tir en rafale par l'augmentation de sa vitesse de tir.",
               "D-e": "CSI 311-2 : D-e : Armes historiques et de collection dont le mod√®le est ant√©rieur au 1er janvier 1900, √† l'exception de celles class√©es dans une autre cat√©gorie, en raison de leur dangerosit√© av√©r√©e, notamment en raison de leur ann√©e de fabrication, par arr√™t√© conjoint du ministre de l'int√©rieur et du ministre charg√© des douanes.",
               "A1-3":
                  "CSI R311-2 : A1-3 : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique √† percussion annulaire permettant le tir de plus de trente et une munitions sans qu'intervienne un r√©approvisionnement, d√®s lors qu'un chargeur d'une capacit√© sup√©rieure √† trente cartouches fait partie int√©grante de l'arme √† feu ou, s'il est amovible, y a √©t√© ins√©r√©.",
               "A1-3bis":
                  "CSI R311-2 : A1-3bis : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique √† percussion centrale permettant le tir de plus de onze munitions sans qu'intervienne un r√©approvisionnement, d√®s lors qu'un chargeur d'une capacit√© sup√©rieure √† trente cartouches fait partie int√©grante de l'arme √† feu ou, s'il est amovible, y a √©t√© ins√©r√©.",
               "A1-3quater":
                  "CSI R311-2 : A1-3quater : Armes √† feu d'√©paule √† r√©p√©tition manuelle permettant le tir de plus de trente et une munitions sans qu'intervienne un r√©approvisionnement, d√®s lors qu'un chargeur d'une capacit√© sup√©rieure √† trente cartouches fait partie int√©grante de l'arme √† feu ou, s'il est amovible, y a √©t√© ins√©r√©.",
               "A1-2":
                  "CSI R311-2 : A1-2 : Armes √† feu de poing, quel que soit le type ou le syst√®me de fonctionnement, permettant le tir de plus de vingt et une munitions sans qu'intervienne un r√©approvisionnement, d√®s lors qu'un syst√®me d'alimentation d'une capacit√© sup√©rieure √† vingt cartouches fait partie int√©grante de l'arme √† feu ou, s'il est amovible, y a √©t√© ins√©r√©.",
               "A1-11":
                  "CSI R311-2 : A1-11 : Armes √† feu √† r√©p√©tition automatique transform√©es en armes √† feu √† r√©p√©tition semi-automatique, en armes √† feu √† r√©p√©tition manuelle ou en armes √† feu √† un coup.",
               "A1-12":
                  "CSI R311-2 : A1-12 : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique dont la longueur peut √™tre r√©duite √† moins de 60 cm √† l'aide d'une crosse repliable ou t√©lescopique, ou d'une crosse d√©montable sans outils, sans qu'elles perdent leur fonctionnalit√©.",
               "B-1": "CSI R311-2 : B-1 : Armes √† feu de poing et armes converties en armes de poing non comprises dans les autres cat√©gories.",
               "B-2a":
                  "CSI R311-2 : B-2a : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique, √† percussion centrale, dont le projectile a un diam√®tre inf√©rieur √† 20 mm, d'une capacit√© sup√©rieure √† 3 coups ou √©quip√©es d'un syst√®me d'alimentation amovible et n'exc√©dant pas 11 coups sans qu'intervienne un r√©approvisionnement.",
               "B-2abis":
                  "CSI R311-2 : B-2abis : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique √† percussion annulaire, dont le projectile a un diam√®tre inf√©rieur √† 20 mm, d'une capacit√© sup√©rieure √† 3 coups ou √©quip√©es d'un syst√®me d'alimentation amovible et n'exc√©dant pas 31 coups sans qu'intervienne un r√©approvisionnement.",
               "B-2b":
                  "CSI R311-2 : B-2b : Armes √† feu d'√©paule √† r√©p√©tition manuelle, dont le projectile a un diam√®tre inf√©rieur √† 20 mm, d'une capacit√© sup√©rieure √† 11 coups et n'exc√©dant pas 31 coups sans qu'intervienne un r√©approvisionnement.",
               "B-2c":
                  "CSI R311-2 : B-2c : Armes √† feu d'√©paule dont la longueur totale minimale est inf√©rieure ou √©gale √† 80 centim√®tres ou dont la longueur du canon est inf√©rieure ou √©gale √† 45 centim√®tres.",
               "B-2d":
                  "CSI R311-2 : B-2d : Armes √† feu d'√©paule √† canon lisse √† r√©p√©tition ou semi-automatiques dont la longueur totale minimale est inf√©rieure ou √©gale √† 80 cm ou dont la longueur du canon est inf√©rieure ou √©gale √† 60 cm.",
               "B-2e":
                  "CSI R311-2 : B-2e : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique ayant l'apparence d'une arme automatique.",
               "B-2f":
                  "CSI R311-2 : B-2f : Armes √† feu d'√©paule √† r√©p√©tition manuelle munies d'un dispositif de rechargement √† pompe suivantes : armes √† canon lisse ou armes √† canon ray√© autres que celles r√©pondant aux caract√©ristiques √©noc√©es au C-1b ou celles mentionn√©es au C-1d.",
               "B-4": "CSI R311-2 : B-4 : Armes chambrant les calibres suivants, quel que soit leur type ou leur syst√®me de fonctionnement ainsi que leurs munitions, douilles et douilles amorc√©es, √† l'exception de celles class√©es dans la cat√©gorie A : Calibre 7.62 x 39, Calibre 5.56 x 45, Calibre 5.45 x 39, Calibre 12.7 x 99, Calibre 14.5 x 114.",
               "C-1a":
                  "CSI R311-2 : C-1a : Armes √† feu d'√©paule √† r√©p√©tition semi-automatique dont le projectile a un diam√®tre inf√©rieur √† 20 mm √©quip√©es de syst√®mes d'alimentation inamovibles permettant le tir de 3 munitions au plus sans qu'intervienne le r√©approvisionnement.",
               "C-1b":
                  "CSI R311-2 : C-1b : Armes √† feu d'√©paule √† r√©p√©tition manuelle dont le projectile a un diam√®tre inf√©rieur √† 20 mm √©quip√©es de syst√®mes d'alimentation permettant le tir de 11 munitions au plus, sans qu'intervienne le r√©approvisionnement.",
               "C-1c":
                  "CSI R311-2 : C-1c : Armes √† feu d'√©paule √† un coup par canon.",
               "C-1d":
                  "CSI R311-2 : C-1d : Armes √† feu d'√©paule √† r√©p√©tition manuelle √† canon ray√© munies d'un dispositif de rechargement √† pompe chambr√© pour les calibres 8, 10, 12, 14, 16, 20, 24, 28, 32, 36 et 410, d'une capacit√© inf√©rieure ou √©gale √† 5 coups, dont la longueur totale est sup√©rieure √† 80 cm, dont la longueur du canon est sup√©rieure √† 60 cm et dont la crosse est fixe.",
            };

            // === D√©but logique simplifi√©e et fid√®le ===
            if (data.brevet_avant_1900) {
               if (data.systeme === "Automatique")
                  return afficherResultat(
                     "A2-1",
                     "Arme automatique malgr√© l'anciennet√© ‚Üí A2-1",
                     CSI["A2-1"]
                  );
               return afficherResultat(
                  "D-e",
                  "Arme historique (brevet avant 1900) ‚Üí D-e",
                  CSI["D-e"]
               );
            }

            if (data.systeme === "Automatique")
               return afficherResultat(
                  "A2-1",
                  "Arme automatique ‚Üí A2-1",
                  CSI["A2-1"]
               );

            if (
               data.type === "√âpaule" &&
               data.systeme === "Semi-automatique" &&
               data.crosse_pliable &&
               data.longueur_min < 60
            )
               return afficherResultat(
                  "A1-12",
                  "√âpaule semi-auto crosse pliable <60cm ‚Üí A1-12",
                  CSI["A1-12"]
               );
            if (
               data.systeme === "Semi-automatique" &&
               data.type === "√âpaule" &&
               percussion_eff === "Annulaire" &&
               data.capacite > 31
            )
               return afficherResultat(
                  "A1-3",
                  "√âpaule semi-auto annulaire >31 coups ‚Üí A1-3",
                  CSI["A1-3"]
               );
            if (
               data.systeme === "Semi-automatique" &&
               data.type === "√âpaule" &&
               percussion_eff === "Centrale" &&
               data.capacite > 11
            )
               return afficherResultat(
                  "A1-3bis",
                  "√âpaule semi-auto centrale >11 coups ‚Üí A1-3bis",
                  CSI["A1-3bis"]
               );
            if (
               ["Levier de sous-garde", "Pompe", "Verrou", "Lin√©aire", "D√©verrouillage de culasse par bouton"].includes(
                  data.systeme
               ) &&
               data.type === "√âpaule" &&
               data.capacite > 31
            )
               return afficherResultat(
                  "A1-3quater",
                  "√âpaule manuelle >31 coups ‚Üí A1-3quater",
                  CSI["A1-3quater"]
               );
            if (data.type === "Poing" && data.capacite > 21)
               return afficherResultat(
                  "A1-2",
                  "Arme de poing >21 coups ‚Üí A1-2",
                  CSI["A1-2"]
               );
            if (data.transformee_auto)
               return afficherResultat(
                  "A1-11",
                  "Arme automatique transform√©e ‚Üí A1-11",
                  CSI["A1-11"]
               );

            if (data.type === "Poing")
               return afficherResultat(
                  "B-1",
                  "Arme de poing ‚Üí B-1",
                  CSI["B-1"]
               );

            if (
               data.type === "√âpaule" &&
               data.systeme === "Semi-automatique" &&
               percussion_eff === "Centrale" &&
               (data.capacite > 3 || data.alimentation === "Chargeur amovible")
            )
               return afficherResultat(
                  "B-2a",
                  "Semi-auto percussion centrale >3 coups ou chargeur amovible ‚Üí B-2a",
                  CSI["B-2a"]
               );

            if (
               data.type === "√âpaule" &&
               data.systeme === "Semi-automatique" &&
               percussion_eff === "Annulaire" &&
               (data.capacite > 3 || data.alimentation === "Chargeur amovible")
            )
               return afficherResultat(
                  "B-2abis",
                  "Semi-auto percussion annulaire >3 coups ou chargeur amovible ‚Üí B-2abis",
                  CSI["B-2abis"]
               );

            if (
               data.type === "√âpaule" &&
               ["Verrou", "Pompe", "Levier de sous-garde", "Lin√©aire", "D√©verrouillage de culasse par bouton"].includes(
                  data.systeme
               ) &&
               data.capacite > 11
            )
               return afficherResultat(
                  "B-2b",
                  "√âpaule manuelle >11 coups ‚Üí B-2b",
                  CSI["B-2b"]
               );

            if (data.longueur_min <= 80 || data.longueur_canon <= 45)
               return afficherResultat(
                  "B-2c",
                  "Longueur minimale ‚â§80cm ou canon ‚â§45cm ‚Üí B-2c",
                  CSI["B-2c"]
               );

            if (
               data.canon === "Lisse" &&
               data.longueur_canon <= 60 &&
               [
                  "Semi-automatique",
                  "Pompe",
                  "Verrou",
                  "Levier de sous-garde",
               ].includes(data.systeme)
            )
               return afficherResultat(
                  "B-2d",
                  "Canon lisse ‚â§60cm ‚Üí B-2d",
                  CSI["B-2d"]
               );

            if (data.apparence_auto && data.systeme === "Semi-automatique")
               return afficherResultat(
                  "B-2e",
                  "Semi-auto ayant l'apparence d'une arme automatique ‚Üí B-2e",
                  CSI["B-2e"]
               );

            if (data.type === "√âpaule" && data.systeme === "Pompe") {
               if (data.canon === "Lisse")
                  return afficherResultat(
                     "B-2f",
                     "Arme √† pompe √† canon lisse ‚Üí B-2f",
                     CSI["B-2f"]
                  );
               if (CALIBRES_LISSES.includes(data.calibre))
                  if (
                     data.capacite > 5 ||
                     data.longueur_min <= 80 ||
                     data.longueur_canon <= 60 ||
                     data.crosse_pliable
                  )
                     return afficherResultat(
                        "B-2f",
                        "Arme √† pompe √† canon ray√© calibre lisse >5 coups ou longueur ‚â§80cm ou canon ‚â§60cm ou crosse pliable ‚Üí B-2f",
                        CSI["B-2f"]
                     );
            }

            if (CALIBRES_B4.includes(data.calibre))
               return afficherResultat(
                  "B-4",
                  `Chambr√©e dans un calibre de guerre (${data.calibre}) ‚Üí B-4`,
                  CSI["B-4"]
               );

            if (
               data.type === "√âpaule" &&
               data.systeme === "Semi-automatique" &&
               data.capacite <= 3 &&
               (data.alimentation === "Chargeur inamovible" ||
                  data.alimentation === "Magasin")
            )
               return afficherResultat(
                  "C-1a",
                  "Semi-auto ‚â§3 coups avec syst√®me d'alimentation inamovible ‚Üí C-1a",
                  CSI["C-1a"]
               );

            if (
               data.type === "√âpaule" &&
               data.systeme === "Pompe" &&
               CALIBRES_LISSES.includes(data.calibre)
            )
               if (
                  data.capacite <= 5 &&
                  data.longueur_min > 80 &&
                  data.longueur_canon > 60 &&
                  !data.crosse_pliable
               )
                  return afficherResultat(
                     "C-1d",
                     "Pompe calibre lisse avec canon ray√© ‚â§5 coups, longueur >80cm, canon >60cm, crosse fixe ‚Üí C-1d",
                     CSI["C-1d"]
                  );

            if (
               data.type === "√âpaule" &&
               ["Verrou", "Pompe", "Levier de sous-garde", "Lin√©aire", "D√©verrouillage de culasse par bouton"].includes(
                  data.systeme
               ) &&
               data.capacite <= 11
            )
               return afficherResultat(
                  "C-1b",
                  "R√©p√©tition manuelle ‚â§11 coups ‚Üí C-1b",
                  CSI["C-1b"]
               );

            if (data.systeme === "Monocoup")
               return afficherResultat(
                  "C-1c",
                  "Arme monocoup ‚Üí C-1c",
                  CSI["C-1c"]
               );

            // Cas par d√©faut
            afficherResultat(
               "Non class√©e",
               "Aucune condition sp√©cifique remplie ‚Üí v√©rifier manuellement.",
               "‚Äî"
            );
         });

         // --- D√©clenche automatiquement le classement ---
         function classerAutomatiquement() {
            document.getElementById("classerBtn").click();
         }

         // Liste des champs √† surveiller
         [
            "type",
            "systeme",
            "canon",
            "calibre",
            "alimentation",
            "capacite",
            "longueur_canon",
            "longueur_min",
            "brevet",
            "crosse",
            "apparence",
            "transformee",
         ].forEach((id) => {
            document
               .getElementById(id)
               .addEventListener("input", classerAutomatiquement);
            document
               .getElementById(id)
               .addEventListener("change", classerAutomatiquement);
         });

         // Classement automatique d√®s le chargement de la page
         window.addEventListener("DOMContentLoaded", classerAutomatiquement);

         document
            .getElementById("copyBtn")
            .addEventListener("click", async () => {
               const texte = document.getElementById("resultat").value;
               if (!texte) return;

               try {
                  await navigator.clipboard.writeText(texte);
                  const btn = document.getElementById("copyBtn");
                  const originalText = btn.textContent;
                  btn.textContent = "‚úÖ Copi√© !";
                  btn.classList.remove("btn-outline-secondary");
                  btn.classList.add("btn-success");
                  setTimeout(() => {
                     btn.textContent = originalText;
                     btn.classList.remove("btn-success");
                     btn.classList.add("btn-outline-secondary");
                  }, 1500);
               } catch (err) {
                  alert(
                     "‚ùå Impossible de copier le texte dans le presse-papiers."
                  );
               }
            });

         // --- Gestion du mode sombre / clair ---
         const themeToggle = document.getElementById("themeToggle");

         // Applique le th√®me sauvegard√© si existant
         const savedTheme = localStorage.getItem("theme");
         if (savedTheme) {
            document.documentElement.setAttribute("data-bs-theme", savedTheme);
            themeToggle.textContent = savedTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
         }

         // √âv√©nement clic sur le bouton
         themeToggle.addEventListener("click", () => {
            const currentTheme =
               document.documentElement.getAttribute("data-bs-theme");
            const newTheme = currentTheme === "dark" ? "light" : "dark";
            document.documentElement.setAttribute("data-bs-theme", newTheme);
            themeToggle.textContent = newTheme === "dark" ? "‚òÄÔ∏è" : "üåô";
            localStorage.setItem("theme", newTheme); // sauvegarde la pr√©f√©rence
         });
      </script>
   </body>
</html>
